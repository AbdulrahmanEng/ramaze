<Page title="Ramaze Blog">
  <?r if @entries.empty? ?>
    <p>No Entries</p>
  <?r end ?>
  <?r @entries.each_with_index do |entry, i| ?>
    <div class="blog_entry">
      <div class="title">
        <div class="title">#{link self, :view, entry.oid, :title => entry.title}</div>
        <div class="date">#{entry.time}</div>
      </div>
      <div class="text">
        #{BlueCloth.new(entry.text.to_s).to_html}
      </div>
      <div class="menu">
        <?r if check_login ?>
          #{link self, :delete, entry.oid, :title => 'Delete'}
          #{link self, :edit, entry.oid, :title => 'Edit'}<br />
        <?r end ?>
        Entry #{@entries.size - i}/#{@entries.size}
      </div>
    </div>
  <?r end ?>
  #{link(self, :new, :title => 'New Entry') if check_login}
</Page>
